(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4e400320"],{"153c":function(e,t,a){var i=a("21f6"),r=a("218d"),n=a("420c"),o=a("fc5c"),c=i("".replace),s="["+o+"]",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),d=function(e){return function(t){var a=n(r(t));return 1&e&&(a=c(a,l,"")),2&e&&(a=c(a,u,"")),a}};e.exports={start:d(1),end:d(2),trim:d(3)}},1799:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"text-align-right rw-page"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:e.layout,"page-sizes":e.pageSizeList,total:e.total},on:{"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t},"size-change":e.onChangeSize,"current-change":e.onChangePage}})],1)},r=[],n=(a("cae2"),{name:"Pagination",props:{total:{required:!0,type:Number},page:{type:Number,default:1},page_size:{type:Number,default:10},pageSizeList:{type:Array,default:function(){return[5,10,20,30,50]}},layout:{type:String,default:"total, sizes, prev, pager, next"}},computed:{currentPage:{get:function(){return this.page},set:function(e){this.$emit("update:page",e)}},pageSize:{get:function(){return this.page_size},set:function(e){this.$emit("update:page_size",e)}}},methods:{onChangeSize:function(e){this.$emit("pagination",{page:this.currentPage,page_size:e})},onChangePage:function(e){this.$emit("pagination",{page:e,page_size:this.pageSize})}}}),o=n,c=a("bdd7"),s=Object(c["a"])(o,i,r,!1,null,null,null);t["a"]=s.exports},"24d2":function(e,t,a){"use strict";var i=a("bdd0");t["a"]={list:function(e){return Object(i["a"])("api.project.list",e)},info:function(e){return Object(i["a"])("api.project.info",{id:e})},add:function(e){return Object(i["a"])("api.project.add",e)},update:function(e){return Object(i["a"])("api.project.edit",e)},edit:function(e){var t="api.project.add";return e.id&&(t="api.project.update"),Object(i["a"])(t,e)},delete:function(e){return Object(i["a"])("api.project.del",{id:e})},member:{list:function(e){return Object(i["a"])("api.project.member.list",e)},info:function(e){return Object(i["a"])("api.project.member.info",{id:e})},add:function(e){return Object(i["a"])("api.project.member.add",e)},update:function(e){return Object(i["a"])("api.project.member.edit",e)},edit:function(e){var t="api.project.member.add";return e.id&&(t="api.project.member.update"),Object(i["a"])(t,e)},delete:function(e){return Object(i["a"])("api.project.member.del",{id:e})}}}},"3ad0":function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return o}));var i=a("70f6");function r(e){Object(i["Message"])({message:e||"操作成功",type:"success",duration:2e3})}function n(e){Object(i["Message"])({message:e||"操作失败",type:"danger",duration:2e3})}function o(e,t,a){i["MessageBox"].confirm(e,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t()})).catch((function(){}))}},"3f7a":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:e.title,visible:e.dialogVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"destroy-on-close":!0},on:{"update:visible":function(t){e.dialogVisible=t}}},[e._t("default",null,{data:e.data})],2)},r=[],n={props:["title","visible"],computed:{data:function(){return this.$props.data},dialogVisible:{get:function(){return this.$props.visible},set:function(e){this.$emit("close")}}}},o=n,c=a("bdd7"),s=Object(c["a"])(o,i,r,!1,null,null,null);t["a"]=s.exports},"5ad4":function(e,t,a){var i=a("769d"),r=a("0bd7"),n=a("4841");e.exports=function(e,t,a){var o,c;return n&&i(o=t.constructor)&&o!==a&&r(c=o.prototype)&&c!==a.prototype&&n(e,c),e}},"8df8":function(e,t,a){var i=a("21f6");e.exports=i(1..valueOf)},aa8f:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",[e.query.project_id>0?a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline",plain:""},on:{click:function(t){e.idForEdit=0}}},[e._v(" 添加成员 ")]):e._e()],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"mt-20",staticStyle:{width:"100%"},attrs:{size:"small",border:"",data:e.list,stripe:""}},[a("el-table-column",{attrs:{prop:"id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{prop:"user.name",label:"用户",width:"200"}}),a("el-table-column",{attrs:{label:"管理权限",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" 管理 "),a("i",{class:e.show(t.row.manage)})])]}}])}),a("el-table-column",{attrs:{label:"文档权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" 读 "),a("i",{class:e.show(t.row.doc_read)})]),a("el-tag",{staticClass:"ml-10",attrs:{type:"info",effect:"plain"}},[e._v(" 写 "),a("i",{class:e.show(t.row.doc_write)})])]}}])}),a("el-table-column",{attrs:{label:"测试权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" 读 "),a("i",{class:e.show(t.row.test_read)})]),a("el-tag",{staticClass:"ml-10",attrs:{type:"info",effect:"plain"}},[e._v(" 写 "),a("i",{class:e.show(t.row.test_write)})])]}}])}),a("el-table-column",{attrs:{label:"BUG权限",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"info",effect:"plain"}},[e._v(" 读 "),a("i",{class:e.show(t.row.bug_read)})]),a("el-tag",{staticClass:"ml-10",attrs:{type:"info",effect:"plain"}},[e._v(" 写 "),a("i",{class:e.show(t.row.bug_write)})])]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.allow("api.project.member.update")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){e.idForEdit=t.row.id}}},[e._v(" 编辑 ")]):e._e(),e.allow("api.project.member.del")?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.onDel(t.row)}}},[e._v(" 删除 ")]):e._e()]}}])})],1),a("Pagination",{attrs:{total:e.count,page_size:e.query.page_size,page:e.query.page},on:{"update:page_size":function(t){return e.$set(e.query,"page_size",t)},"update:page":function(t){return e.$set(e.query,"page",t)},pagination:e.init}}),e.idForEdit>-1?a("Dialog",{attrs:{title:0===e.idForEdit?"新增成员":"编辑成员",visible:e.idForEdit>-1},on:{close:function(t){e.idForEdit=-1}}},[a("MemberEdit",{attrs:{id:e.idForEdit,projectId:e.query.project_id},on:{reload:e.load}})],1):e._e()],1)},r=[],n=a("1799"),o=a("3f7a"),c=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{staticStyle:{width:"100%"},attrs:{model:e.form,"label-width":"80px","label-position":"right",size:"small"}},[a("el-form-item",{attrs:{label:"用户"}},[a("el-input",{attrs:{disabled:e.id>0},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}})],1),a("el-form-item",{attrs:{label:"管理"}},[a("el-checkbox",{model:{value:e.form.manage,callback:function(t){e.$set(e.form,"manage",t)},expression:"form.manage"}},[e._v("管理")])],1),a("el-form-item",{attrs:{label:"文档"}},[a("el-checkbox",{model:{value:e.form.doc_read,callback:function(t){e.$set(e.form,"doc_read",t)},expression:"form.doc_read"}},[e._v("读")]),a("el-checkbox",{model:{value:e.form.doc_write,callback:function(t){e.$set(e.form,"doc_write",t)},expression:"form.doc_write"}},[e._v("写")])],1),a("el-form-item",{attrs:{label:"测试"}},[a("el-checkbox",{model:{value:e.form.test_read,callback:function(t){e.$set(e.form,"test_read",t)},expression:"form.test_read"}},[e._v("读")]),a("el-checkbox",{model:{value:e.form.test_write,callback:function(t){e.$set(e.form,"test_write",t)},expression:"form.test_write"}},[e._v("写")])],1),a("el-form-item",{attrs:{label:"BUG"}},[a("el-checkbox",{model:{value:e.form.bug_read,callback:function(t){e.$set(e.form,"bug_read",t)},expression:"form.bug_read"}},[e._v("读")]),a("el-checkbox",{model:{value:e.form.bug_write,callback:function(t){e.$set(e.form,"bug_write",t)},expression:"form.bug_write"}},[e._v("写")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v(" "+e._s(e.id>0?"确认修改":"新增")+" ")])],1)],1)},s=[],l=(a("cae2"),a("24d2")),u=a("3ad0"),d={props:{projectId:{type:Number,required:!0},id:{type:Number,default:0}},data:function(){return{loading:!0,form:{username:"",manage:!1,doc_read:!1,doc_write:!1,test_read:!1,test_write:!1,bug_read:!1,bug_write:!1}}},created:function(){var e=this;this.id?l["a"].member.info(this.id).then((function(t){e.form={username:t.user.username,manage:Boolean(t.manage),doc_read:Boolean(t.doc_read),doc_write:Boolean(t.doc_write),test_read:Boolean(t.test_read),test_write:Boolean(t.test_write),bug_read:Boolean(t.bug_read),bug_write:Boolean(t.bug_write)},e.loading=!1})):this.loading=!1},methods:{onSubmit:function(){var e=this;if(!this.loading){this.loading=!0;var t={username:this.form.username,manage:this.form.manage?1:0,doc_read:this.form.doc_read?1:0,doc_write:this.form.doc_write?1:0,test_read:this.form.test_read?1:0,test_write:this.form.test_write?1:0,bug_read:this.form.bug_read?1:0,bug_write:this.form.bug_write?1:0};this.id?t.id=this.id:t.project_id=this.projectId,l["a"].member.edit(t).then((function(t){Object(u["c"])(e.$props.id?"编辑成功":"新增成功"),e.$emit("reload")}),(function(t){e.loading=!1}))}}}},f=d,p=a("bdd7"),m=Object(p["a"])(f,c,s,!1,null,null,null),g=m.exports,b=a("4cac"),_={components:{Pagination:n["a"],MemberEdit:g,Dialog:o["a"]},data:function(){return{idForEdit:-1,title:"",loading:!0,list:[],count:0,query:{project_id:0,page:1,page_size:10}}},created:function(){this.query.project_id=parseInt(this.$route.params.id),0!==this.query.project_id?(this.init(),this.$emit("load")):this.loading=!1},methods:{init:function(){var e=this;this.loading=!0,l["a"].member.list(this.query).then((function(t){e.list=t.datas,e.count=t.count,e.loading=!1}))},onDel:function(e){var t=this;Object(u["a"])("您确定要删除吗",(function(){l["a"].member.delete(e.id).then((function(e){Object(u["c"])("删除成功"),t.load()}))}))},load:function(){0===this.idForEdit&&(this.query.page=1),this.idForEdit=-1,this.init()},show:function(e){return e>0?"el-icon-check c-success f-bold":"el-icon-close c-danger f-bold"},allow:b["a"]}},h=_,v=Object(p["a"])(h,i,r,!1,null,null,null);t["default"]=v.exports},cae2:function(e,t,a){"use strict";var i=a("fdff"),r=a("2ef6"),n=a("21f6"),o=a("83d1"),c=a("7293"),s=a("8e14"),l=a("5ad4"),u=a("18e2"),d=a("cc40"),f=a("87d7"),p=a("9d66"),m=a("657a").f,g=a("39f5").f,b=a("b74d").f,_=a("8df8"),h=a("153c").trim,v="Number",w=r[v],y=w.prototype,j=r.TypeError,x=n("".slice),k=n("".charCodeAt),E=function(e){var t=f(e,"number");return"bigint"==typeof t?t:z(t)},z=function(e){var t,a,i,r,n,o,c,s,l=f(e,"number");if(d(l))throw j("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=h(l),t=k(l,0),43===t||45===t){if(a=k(l,2),88===a||120===a)return NaN}else if(48===t){switch(k(l,1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+l}for(n=x(l,2),o=n.length,c=0;c<o;c++)if(s=k(n,c),s<48||s>r)return NaN;return parseInt(n,i)}return+l};if(o(v,!w(" 0o1")||!w("0b1")||w("+0x1"))){for(var S,$=function(e){var t=arguments.length<1?0:w(E(e)),a=this;return u(y,a)&&p((function(){_(a)}))?l(Object(t),a,$):t},N=i?m(w):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),O=0;N.length>O;O++)s(w,S=N[O])&&!s($,S)&&b($,S,g(w,S));$.prototype=y,y.constructor=$,c(r,v,$)}},fc5c:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"}}]);